"use strict";(self.webpackChunkdocs_reanimated=self.webpackChunkdocs_reanimated||[]).push([[9546],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>f});var r=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=r.createContext({}),d=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=d(e.components);return r.createElement(s.Provider,{value:t},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},p=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),u=d(n),p=o,f=u["".concat(s,".").concat(p)]||u[p]||m[p]||a;return n?r.createElement(f,i(i({ref:t},c),{},{components:n})):r.createElement(f,i({ref:t},c))}));function f(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=p;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[u]="string"==typeof e?e:o,i[1]=l;for(var d=2;d<a;d++)i[d]=n[d];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}p.displayName="MDXCreateElement"},15064:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>b,contentTitle:()=>g,default:()=>N,frontMatter:()=>y,metadata:()=>h,toc:()=>k});var r=n(87462),o=n(67294),a=n(3905),i=n(67177),l=n(24404),s=n(28033),d=n(42233),c=n(71435),u=n(68413);const m={code:"function RelativeCoordsTsx1(event){const{getRelativeCoords,animatedRef,setCoords}=this.__closure;const relativeCoords=getRelativeCoords(animatedRef,event.absoluteX,event.absoluteY);if(relativeCoords){setCoords(relativeCoords);}}"},p=s.Z.create({container:{flex:1,justifyContent:"center",alignItems:"center"},innerView:{width:300,height:300,backgroundColor:"var(--swm-purple-light-80)",justifyContent:"center",alignItems:"center",borderRadius:40,cursor:"pointer"},coordsData:{fontSize:20,fontFamily:"Aeonik",color:"var(--swm-navy-light-100)"},coords:{marginBottom:16,fontWeight:"500"},text:{color:"var(--swm-off-white)",fontFamily:"Aeonik",fontSize:16,fontWeight:"bold"},lightText:{color:"var(--swm-off-white)"},darkText:{color:"var(--swm-navy-light-100)"}}),f=()=>{const e=(0,d.useAnimatedRef)(),{colorScheme:t}=(0,c.tv)(),[n,r]=(0,o.useState)({x:0,y:0}),a=u.oF.Tap().onEnd(function(){const t=function(t){const n=(0,d.getRelativeCoords)(e,t.absoluteX,t.absoluteY);n&&r(n)};return t.__closure={getRelativeCoords:d.getRelativeCoords,animatedRef:e,setCoords:r},t.__workletHash=1505519536525,t.__initData=m,t}()),s="light"===t?p.darkText:p.lightText;return o.createElement(i.Z,{style:p.container},o.createElement(l.Z,{style:[p.coordsData,s]},"Relative coordinates to parent:"),o.createElement(l.Z,{style:[p.coordsData,p.coords,s]},"x=",n.x.toFixed()," y=",n.y.toFixed()),o.createElement(u.Le,{gesture:a},o.createElement(d.default.View,{ref:e,style:p.innerView},o.createElement(l.Z,{style:p.text},"Tap anywhere inside."))))},v="import React, { useState } from 'react';\nimport { View, Text, StyleSheet } from 'react-native';\nimport Animated, {\n  useAnimatedRef,\n  getRelativeCoords,\n} from 'react-native-reanimated';\nimport { useColorScheme } from '@mui/material';\nimport { Gesture, GestureDetector } from 'react-native-gesture-handler';\n\nconst RelativeCoords = () => {\n  const animatedRef = useAnimatedRef();\n  const { colorScheme } = useColorScheme();\n  const [coords, setCoords] = useState({ x: 0, y: 0 });\n\n  const tapGesture = Gesture.Tap().onEnd((event) => {\n    const relativeCoords = getRelativeCoords(\n      animatedRef,\n      event.absoluteX,\n      event.absoluteY\n    );\n    if (relativeCoords) {\n      setCoords(relativeCoords);\n    }\n  });\n\n  const textColor =\n    colorScheme === 'light' ? styles.darkText : styles.lightText;\n\n  return (\n    <View style={styles.container}>\n      <Text style={[styles.coordsData, textColor]}>\n        Relative coordinates to parent:\n      </Text>\n      <Text style={[styles.coordsData, styles.coords, textColor]}>\n        x={coords.x.toFixed()} y=\n        {coords.y.toFixed()}\n      </Text>\n      <GestureDetector gesture={tapGesture}>\n        <Animated.View ref={animatedRef} style={styles.innerView}>\n          <Text style={styles.text}>Tap anywhere inside.</Text>\n        </Animated.View>\n      </GestureDetector>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  innerView: {\n    width: 300,\n    height: 300,\n    backgroundColor: 'var(--swm-purple-light-80)',\n    justifyContent: 'center',\n    alignItems: 'center',\n    borderRadius: 40,\n    cursor: 'pointer',\n  },\n  coordsData: {\n    fontSize: 20,\n    fontFamily: 'Aeonik',\n    color: 'var(--swm-navy-light-100)',\n  },\n  coords: {\n    marginBottom: 16,\n    fontWeight: '500',\n  },\n  text: {\n    color: 'var(--swm-off-white)',\n    fontFamily: 'Aeonik',\n    fontSize: 16,\n    fontWeight: 'bold',\n  },\n  lightText: {\n    color: 'var(--swm-off-white)',\n  },\n  darkText: {\n    color: 'var(--swm-navy-light-100)',\n  },\n});\n\nexport default RelativeCoords;\n",y={sidebar_position:4},g="getRelativeCoords",h={unversionedId:"utilities/getRelativeCoords",id:"utilities/getRelativeCoords",title:"getRelativeCoords",description:"getRelativeCoords determines the location on the screen, relative to the given view.",source:"@site/docs/utilities/getRelativeCoords.mdx",sourceDirName:"utilities",slug:"/utilities/getRelativeCoords",permalink:"/react-native-reanimated/docs/utilities/getRelativeCoords",draft:!1,editUrl:"https://github.com/software-mansion/react-native-reanimated/edit/main/packages/docs-reanimated/docs/utilities/getRelativeCoords.mdx",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"interpolateColor",permalink:"/react-native-reanimated/docs/utilities/interpolateColor"},next:{title:"Advanced APIs",permalink:"/react-native-reanimated/docs/category/advanced-apis"}},b={},k=[{value:"Reference",id:"reference",level:2},{value:"Arguments",id:"arguments",level:3},{value:"<code>animatedRef</code>",id:"animatedref",level:4},{value:"<code>absoluteX</code>",id:"absolutex",level:4},{value:"<code>absoluteY</code>",id:"absolutey",level:4},{value:"Returns",id:"returns",level:3},{value:"Example",id:"example",level:3},{value:"Platform compatibility",id:"platform-compatibility",level:2}],C=(x="InteractiveExample",function(e){return console.warn("Component "+x+" was not imported, exported, or provided by MDXProvider as global scope"),(0,a.kt)("div",e)});var x;const w={toc:k},R="wrapper";function N(e){let{components:t,...n}=e;return(0,a.kt)(R,(0,r.Z)({},w,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"getrelativecoords"},"getRelativeCoords"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"getRelativeCoords")," determines the location on the screen, relative to the given view."),(0,a.kt)("h2",{id:"reference"},"Reference"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx"},"import { getRelativeCoords } from 'react-native-reanimated';\n\nconst Comp = () => {\n  const animatedRef = useAnimatedRef();\n  // ...\n\n  const gestureHandler = useAnimatedGestureHandler({\n    onEnd: (event) => {\n      const coords = getRelativeCoords(\n        animatedRef,\n        event.absoluteX,\n        event.absoluteY\n      );\n    },\n  });\n\n  return (\n    <View ref={aref}>\n      <PanGestureHandler onGestureEvent={gestureHandler}>\n        <Animated.View style={[styles.box]} />\n      </PanGestureHandler>\n    </View>\n  );\n};\n")),(0,a.kt)("details",null,(0,a.kt)("summary",null,"Type definitions"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"function getRelativeCoords(\n  animatedRef: AnimatedRef<Component>,\n  absoluteX: number,\n  absoluteY: number\n): ComponentCoords | null;\n\ninterface ComponentCoords {\n  x: number;\n  y: number;\n}\n"))),(0,a.kt)("h3",{id:"arguments"},"Arguments"),(0,a.kt)("h4",{id:"animatedref"},(0,a.kt)("inlineCode",{parentName:"h4"},"animatedRef")),(0,a.kt)("p",null,"The product of ",(0,a.kt)("a",{parentName:"p",href:"/docs/core/useAnimatedRef"},(0,a.kt)("inlineCode",{parentName:"a"},"useAnimatedRef"))," is Reanimated's extension of a standard React ref (delivers the view tag on the UI thread). This ref should be passed as a prop to the view relative to which we want to know coordinates."),(0,a.kt)("h4",{id:"absolutex"},(0,a.kt)("inlineCode",{parentName:"h4"},"absoluteX")),(0,a.kt)("p",null,"Number which is an absolute ",(0,a.kt)("inlineCode",{parentName:"p"},"x")," coordinate."),(0,a.kt)("h4",{id:"absolutey"},(0,a.kt)("inlineCode",{parentName:"h4"},"absoluteY")),(0,a.kt)("p",null,"Number which is an absolute ",(0,a.kt)("inlineCode",{parentName:"p"},"y")," coordinate."),(0,a.kt)("h3",{id:"returns"},"Returns"),(0,a.kt)("p",null,"Object which contains relative coordinates"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"x")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"y"))),(0,a.kt)("h3",{id:"example"},"Example"),(0,a.kt)(C,{src:v,component:f,mdxType:"InteractiveExample"}),(0,a.kt)("h2",{id:"platform-compatibility"},"Platform compatibility"),(0,a.kt)("div",{className:"platform-compatibility"},(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Android"),(0,a.kt)("th",{parentName:"tr",align:null},"iOS"),(0,a.kt)("th",{parentName:"tr",align:null},"Web"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"\u2705"),(0,a.kt)("td",{parentName:"tr",align:null},"\u2705"),(0,a.kt)("td",{parentName:"tr",align:null},"\u2705"))))))}N.isMDXComponent=!0}}]);