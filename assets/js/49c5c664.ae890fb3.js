"use strict";(self.webpackChunkdocs_reanimated=self.webpackChunkdocs_reanimated||[]).push([[9328],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>f});var o=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var i=o.createContext({}),d=function(e){var t=o.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},u=function(e){var t=d(e.components);return o.createElement(i.Provider,{value:t},e.children)},c="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},h=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,i=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),c=d(n),h=r,f=c["".concat(i,".").concat(h)]||c[h]||p[h]||a;return n?o.createElement(f,l(l({ref:t},u),{},{components:n})):o.createElement(f,l({ref:t},u))}));function f(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,l=new Array(a);l[0]=h;var s={};for(var i in t)hasOwnProperty.call(t,i)&&(s[i]=t[i]);s.originalType=e,s[c]="string"==typeof e?e:r,l[1]=s;for(var d=2;d<a;d++)l[d]=n[d];return o.createElement.apply(null,l)}return o.createElement.apply(null,n)}h.displayName="MDXCreateElement"},79271:(e,t,n)=>{n.d(t,{Z:()=>f});var o=n(67294);const r="collapseButton_X7H2",a="arrow_XdVJ";var l;function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},s.apply(this,arguments)}const i=e=>{let{title:t,titleId:n,...r}=e;return o.createElement("svg",s({width:12,height:7,viewBox:"0 0 12 7",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?o.createElement("title",{id:n},t):null,l||(l=o.createElement("path",{d:"m1 1 5 5 5-5",stroke:"#001A72",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})))};var d;function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},u.apply(this,arguments)}const c=e=>{let{title:t,titleId:n,...r}=e;return o.createElement("svg",u({width:12,height:7,viewBox:"0 0 12 7",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?o.createElement("title",{id:n},t):null,d||(d=o.createElement("path",{d:"m1 1 5 5 5-5",stroke:"#F8F9FF",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})))};var p=n(92949),h=n(86010);const f=e=>{let{label:t,labelCollapsed:n,collapsed:l,onCollapse:s,className:d}=e;const{colorMode:u}=(0,p.I)();return o.createElement("div",{className:(0,h.default)(r,d),"data-collapsed":l,onClick:()=>s()},"light"===u?o.createElement(i,{className:a}):o.createElement(c,{className:a}),o.createElement("button",null,l?n:t))}},61837:(e,t,n)=>{n.d(t,{Z:()=>s});var o=n(67294),r=n(60614);const a={container:"container_oGcb",collapseButton:"collapseButton_YVdr"};var l=n(79271);function s(e){let{src:t,showLines:n}=e;const[s,i]=(0,o.useState)(!0);if(!n)return o.createElement(r.Z,{language:"jsx"},t);const[d,u]=n,c=t.split("\n").slice(d,u+1).join("\n");return o.createElement("div",{className:a.container},o.createElement(l.Z,{label:"Collapse the full code",labelCollapsed:"Expand the full code",collapsed:s,onCollapse:()=>i(!s),className:a.collapseButton}),o.createElement(r.Z,{language:"jsx"},s?c:t))}},67772:(e,t,n)=>{n.d(t,{Z:()=>y});var o=n(67294),r=n(71435),a=n(67177),l=n(28033),s=n(68413),i=n(78069),d=n(99435),u=n(10758),c=n(35842),p=n(68592),h=n(49638);const f=50;i.Yv({text:!0});const m=d.F(s.oi),v={code:"function anonymous(event){const{offset,MAX_VALUE,INITIAL_BOX_SIZE,boxWidth}=this.__closure;offset.value=Math.abs(offset.value)<=MAX_VALUE?offset.value+event.changeX<=0?0:offset.value+event.changeX>=MAX_VALUE?MAX_VALUE:offset.value+event.changeX:offset.value;const newWidth=INITIAL_BOX_SIZE+offset.value;boxWidth.value=newWidth;}"},g={code:"function anonymous(){const{INITIAL_BOX_SIZE,offset}=this.__closure;return{width:INITIAL_BOX_SIZE+offset.value};}"},S={code:"function anonymous(){const{offset}=this.__closure;return{transform:[{translateX:offset.value}]};}"},b={code:'function anonymous(){const{boxWidth}=this.__closure;return{text:"Box width: "+Math.round(boxWidth.value),defaultValue:"Box width: "+boxWidth.value};}'},x=l.Z.create({container:{flex:1,justifyContent:"center",alignItems:"center",gap:32},sliderTrack:{width:300,height:50,backgroundColor:"#82cab2",borderRadius:25,justifyContent:"center",padding:5},sliderHandle:{width:40,height:40,backgroundColor:"#f8f9ff",borderRadius:20,position:"absolute",left:5},box:{height:f,backgroundColor:"#b58df1",borderRadius:10},boxWidthText:{textAlign:"center",fontSize:18}}),y=()=>{const{colorScheme:e}=(0,r.tv)(),t=(0,u.y)(0),n=(0,u.y)(f),l=250,i=s.oF.Pan().onChange(function(){const e=function(e){t.value=Math.abs(t.value)<=l?t.value+e.changeX<=0?0:t.value+e.changeX>=l?l:t.value+e.changeX:t.value;const o=f+t.value;n.value=o};return e.__closure={offset:t,MAX_VALUE:l,INITIAL_BOX_SIZE:f,boxWidth:n},e.__workletHash=0xddc5bf2965b,e.__initData=v,e}()),d=(0,c.l)(function(){const e=function(){return{width:f+t.value}};return e.__closure={INITIAL_BOX_SIZE:f,offset:t},e.__workletHash=6207592841252,e.__initData=g,e}()),y=(0,c.l)(function(){const e=function(){return{transform:[{translateX:t.value}]}};return e.__closure={offset:t},e.__workletHash=0xf945d52c70d,e.__initData=S,e}()),w={color:"light"===e?"#001a72":"#f8f9ff"},k=(0,p.u)(function(){const e=function(){return{text:`Box width: ${Math.round(n.value)}`,defaultValue:`Box width: ${n.value}`}};return e.__closure={boxWidth:n},e.__workletHash=9566056724901,e.__initData=b,e}());return o.createElement(s.cS,{style:x.container},o.createElement(m,{animatedProps:k,style:[w,x.boxWidthText],editable:!1}),o.createElement(h.n,{style:[x.box,d]}),o.createElement(a.Z,{style:x.sliderTrack},o.createElement(s.Le,{gesture:i},o.createElement(h.n,{style:[x.sliderHandle,y]}))))}},41928:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>d,default:()=>S,frontMatter:()=>i,metadata:()=>u,toc:()=>p});var o=n(87462),r=(n(67294),n(3905)),a=n(67772),l=n(60268),s=n(61837);const i={slug:"slider",title:"Slider"},d=void 0,u={permalink:"/react-native-reanimated/examples/slider",source:"@site/blog/slider.md",title:"Slider",description:"Slider allows users to adjust a value or control a setting by sliding a handle along a track. It is commonly used to adjust settings such as volume, brightness, or in this case, the width of a box.",date:"2024-07-08T07:39:29.000Z",formattedDate:"July 8, 2024",tags:[],hasTruncateMarker:!1,authors:[],frontMatter:{slug:"slider",title:"Slider"},prevItem:{title:"Section List",permalink:"/react-native-reanimated/examples/sectionlist"},nextItem:{title:"Switch",permalink:"/react-native-reanimated/examples/switch"}},c={authorsImageUrls:[]},p=[],h=e=>function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)},f=h("InteractiveExample"),m=h("ExampleVideo"),v={toc:p},g="wrapper";function S(e){let{components:t,...n}=e;return(0,r.kt)(g,(0,o.Z)({},v,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Slider allows users to adjust a value or control a setting by sliding a handle along a track. It is commonly used to adjust settings such as volume, brightness, or in this case, the width of a box."),(0,r.kt)(f,{src:l.Z,component:a.Z,mdxType:"InteractiveExample"}),(0,r.kt)("p",null,"We use the ",(0,r.kt)("inlineCode",{parentName:"p"},"useSharedValue")," hook to store the offset of the slider handle, allowing for smooth animation during sliding."),(0,r.kt)(s.Z,{src:l.Z,showLines:[24,24],mdxType:"CollapsibleCode"}),(0,r.kt)("p",null,"This example is done using ",(0,r.kt)("a",{parentName:"p",href:"https://docs.swmansion.com/react-native-gesture-handler/docs/gestures/pan-gesture"},"Pan gesture")," from ",(0,r.kt)("inlineCode",{parentName:"p"},"react-native-gesture-handler")," library. It adjusts the handle's position and width of the box accordingly to the current offset. The offset is a ",(0,r.kt)("a",{parentName:"p",href:"/docs/fundamentals/glossary#shared-value"},"shared value")," and is updated during the ",(0,r.kt)("inlineCode",{parentName:"p"},"onChange")," event of the pan gesture."),(0,r.kt)("samp",{id:"Slider"},"Slider"),(0,r.kt)(s.Z,{src:l.Z,showLines:[28,41],mdxType:"CollapsibleCode"}),(0,r.kt)(m,{sources:{android:"/react-native-reanimated/recordings/examples/slider_android.mov",ios:"/react-native-reanimated/recordings/examples/slider_ios.mov"},mdxType:"ExampleVideo"}),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"useAnimatedStyle")," hook is used to create animated styles for both the box and the slider handle. This ensures that changes to the offset value result in smooth animations for both components."),(0,r.kt)("samp",{id:"Slider"},"Slider"),(0,r.kt)(s.Z,{src:l.Z,showLines:[42,52],mdxType:"CollapsibleCode"}),(0,r.kt)("p",null,"Leveraging animated props allows us to run them on the UI thread instead of the JS thread. To prevent unnecessary re-renders when the text displaying the current width of the box changes, we used the ",(0,r.kt)("inlineCode",{parentName:"p"},"useAnimatedProps")," hook."),(0,r.kt)("p",null,"Additionally, we opted for ",(0,r.kt)("strong",{parentName:"p"},"TextInput")," instead of ",(0,r.kt)("strong",{parentName:"p"},"Text")," because ",(0,r.kt)("strong",{parentName:"p"},"TextInput")," has a ",(0,r.kt)("inlineCode",{parentName:"p"},"text")," property that can be animated, whereas ",(0,r.kt)("strong",{parentName:"p"},"Text")," only has children."),(0,r.kt)("p",null,"This approach also enabled us to animate ",(0,r.kt)("strong",{parentName:"p"},"TextInput")," using ",(0,r.kt)("a",{parentName:"p",href:"/docs/fundamentals/glossary#shared-value"},"shared values"),"."),(0,r.kt)("samp",{id:"Slider"},"Slider"),(0,r.kt)(s.Z,{src:l.Z,showLines:[58,63],mdxType:"CollapsibleCode"}))}S.isMDXComponent=!0},60268:(e,t,n)=>{n.d(t,{Z:()=>o});const o="import React from 'react';\nimport { useColorScheme } from '@mui/material';\nimport { View, StyleSheet } from 'react-native';\nimport { TextInput } from 'react-native-gesture-handler';\nimport {\n  GestureHandlerRootView,\n  GestureDetector,\n  Gesture,\n} from 'react-native-gesture-handler';\nimport Animated, {\n  useSharedValue,\n  useAnimatedStyle,\n  useAnimatedProps,\n} from 'react-native-reanimated';\n\nconst INITIAL_BOX_SIZE = 50;\nconst SLIDER_WIDTH = 300;\n\nAnimated.addWhitelistedNativeProps({ text: true });\n\nconst AnimatedTextInput = Animated.createAnimatedComponent(TextInput);\n\nconst Slider = () => {\n  const { colorScheme } = useColorScheme();\n  const offset = useSharedValue(0);\n  const boxWidth = useSharedValue(INITIAL_BOX_SIZE);\n  const MAX_VALUE = SLIDER_WIDTH - INITIAL_BOX_SIZE;\n\n  const pan = Gesture.Pan().onChange((event) => {\n    offset.value =\n      Math.abs(offset.value) <= MAX_VALUE\n        ? offset.value + event.changeX <= 0\n          ? 0\n          : offset.value + event.changeX >= MAX_VALUE\n          ? MAX_VALUE\n          : offset.value + event.changeX\n        : offset.value;\n\n    const newWidth = INITIAL_BOX_SIZE + offset.value;\n    boxWidth.value = newWidth;\n  });\n\n  const boxStyle = useAnimatedStyle(() => {\n    return {\n      width: INITIAL_BOX_SIZE + offset.value,\n    };\n  });\n\n  const sliderStyle = useAnimatedStyle(() => {\n    return {\n      transform: [{ translateX: offset.value }],\n    };\n  });\n\n  const animatedBoxTextColor = {\n    color: colorScheme === 'light' ? '#001a72' : '#f8f9ff',\n  };\n\n  const animatedProps = useAnimatedProps(() => {\n    return {\n      text: `Box width: ${Math.round(boxWidth.value)}`,\n      defaultValue: `Box width: ${boxWidth.value}`,\n    };\n  });\n\n  return (\n    <GestureHandlerRootView style={styles.container}>\n      <AnimatedTextInput\n        animatedProps={animatedProps}\n        style={[animatedBoxTextColor, styles.boxWidthText]}\n        editable={false}\n      />\n      <Animated.View style={[styles.box, boxStyle]} />\n      <View style={styles.sliderTrack}>\n        <GestureDetector gesture={pan}>\n          <Animated.View style={[styles.sliderHandle, sliderStyle]} />\n        </GestureDetector>\n      </View>\n    </GestureHandlerRootView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    gap: 32,\n  },\n  sliderTrack: {\n    width: SLIDER_WIDTH,\n    height: 50,\n    backgroundColor: '#82cab2',\n    borderRadius: 25,\n    justifyContent: 'center',\n    padding: 5,\n  },\n  sliderHandle: {\n    width: 40,\n    height: 40,\n    backgroundColor: '#f8f9ff',\n    borderRadius: 20,\n    position: 'absolute',\n    left: 5,\n  },\n  box: {\n    height: INITIAL_BOX_SIZE,\n    backgroundColor: '#b58df1',\n    borderRadius: 10,\n  },\n  boxWidthText: {\n    textAlign: 'center',\n    fontSize: 18,\n  },\n});\n\nexport default Slider;\n"},24404:(e,t,n)=>{n.d(t,{Z:()=>y});var o=n(61328),r=n(63366),a=n(67294),l=n(37353),s=n(13250),i=n(45819),d=n(30042),u=n(16528),c=n(60091),p=n(72359),h=n(28033),f=n(84370),m=n(72931),v=["hrefAttrs","numberOfLines","onClick","onLayout","onPress","onMoveShouldSetResponder","onMoveShouldSetResponderCapture","onResponderEnd","onResponderGrant","onResponderMove","onResponderReject","onResponderRelease","onResponderStart","onResponderTerminate","onResponderTerminationRequest","onScrollShouldSetResponder","onScrollShouldSetResponderCapture","onSelectionChangeShouldSetResponder","onSelectionChangeShouldSetResponderCapture","onStartShouldSetResponder","onStartShouldSetResponderCapture","selectable"],g=Object.assign({},s.lG,s.LO,s._T,s.YB,s.Uy,s.hJ,s.E5,s.vr,{href:!0,lang:!0,pointerEvents:!0}),S=a.forwardRef(((e,t)=>{var n=e.hrefAttrs,o=e.numberOfLines,s=e.onClick,h=e.onLayout,S=e.onPress,b=e.onMoveShouldSetResponder,y=e.onMoveShouldSetResponderCapture,w=e.onResponderEnd,k=e.onResponderGrant,_=e.onResponderMove,I=e.onResponderReject,R=e.onResponderRelease,C=e.onResponderStart,E=e.onResponderTerminate,T=e.onResponderTerminationRequest,A=e.onScrollShouldSetResponder,O=e.onScrollShouldSetResponderCapture,L=e.onSelectionChangeShouldSetResponder,Z=e.onSelectionChangeShouldSetResponderCapture,j=e.onStartShouldSetResponder,X=e.onStartShouldSetResponderCapture,N=e.selectable,M=(0,r.Z)(e,v),P=a.useContext(f.Z),W=a.useRef(null),B=(0,m.PE)().direction;(0,d.Z)(W,h),(0,p.Z)(W,{onMoveShouldSetResponder:b,onMoveShouldSetResponderCapture:y,onResponderEnd:w,onResponderGrant:k,onResponderMove:_,onResponderReject:I,onResponderRelease:R,onResponderStart:C,onResponderTerminate:E,onResponderTerminationRequest:T,onScrollShouldSetResponder:A,onScrollShouldSetResponderCapture:O,onSelectionChangeShouldSetResponder:L,onSelectionChangeShouldSetResponderCapture:Z,onStartShouldSetResponder:j,onStartShouldSetResponderCapture:X});var V=a.useCallback((e=>{null!=s?s(e):null!=S&&(e.stopPropagation(),S(e))}),[s,S]),D=P?"span":"div",H=null!=e.lang?(0,m.w1)(e.lang):null,G=e.dir||H,U=G||B,$=(e=>(0,i.Z)(e,g))(M);if($.dir=G,P||($.dir=null!=G?G:"auto"),(s||S)&&($.onClick=V),$.style=[null!=o&&o>1&&{WebkitLineClamp:o},!0===P?x.textHasAncestor$raw:x.text$raw,1===o&&x.textOneLine,null!=o&&o>1&&x.textMultiLine,e.style,!0===N&&x.selectable,!1===N&&x.notSelectable,S&&x.pressable],null!=e.href&&(D="a",null!=n)){var F=n.download,J=n.rel,q=n.target;null!=F&&($.download=F),null!=J&&($.rel=J),"string"==typeof q&&($.target="_"!==q.charAt(0)?"_"+q:q)}var z=(0,c.Z)($),Y=(0,u.Z)(W,z,t);$.ref=Y;var K=(0,l.Z)(D,$,{writingDirection:U});return P?K:a.createElement(f.Z.Provider,{value:!0},K)}));S.displayName="Text";var b={backgroundColor:"transparent",border:"0 solid black",boxSizing:"border-box",color:"black",display:"inline",font:"14px System",listStyle:"none",margin:0,padding:0,textAlign:"inherit",textDecoration:"none",whiteSpace:"pre-wrap",wordWrap:"break-word"},x=h.Z.create({text$raw:b,textHasAncestor$raw:(0,o.Z)((0,o.Z)({},b),{},{color:"inherit",font:"inherit",whiteSpace:"inherit"}),textOneLine:{maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",wordWrap:"normal"},textMultiLine:{display:"-webkit-box",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",WebkitBoxOrient:"vertical"},notSelectable:{userSelect:"none"},selectable:{userSelect:"text"},pressable:{cursor:"pointer"}});const y=S}}]);